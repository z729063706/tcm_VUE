{"remainingRequest":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/babel-loader/lib/index.js!/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoyunhao/Code/html/tcm_VUE/src/components/admin/publish.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/src/components/admin/publish.vue","mtime":1658995651025},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/cache-loader/dist/cjs.js","mtime":1658995717985},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/babel-loader/lib/index.js","mtime":1658995718218},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/cache-loader/dist/cjs.js","mtime":1658995717985},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/index.js","mtime":1658995718269}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBuZXdzVHlwZUFkYXB0ZXIgZnJvbSAiLi4vLi4vdG9vbC9uZXdzVHlwZUFkYXB0ZXJUb0VuZy5qcyI7CmltcG9ydCBnbG9iYWwgZnJvbSAiLi4vLi4vZ2xvYmFsLmpzIjsKaW1wb3J0IHdhbmdlZGl0b3IgZnJvbSAiLi4vdG9vbC93YW5nZWRpdG9yIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIHdhbmdlZGl0b3I6IHdhbmdlZGl0b3IKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvL25ld3NDb250ZW50OiIiLAogICAgICBuZXdzOiB7CiAgICAgICAgdGl0bGU6ICIiLAogICAgICAgIGNvbnRlbnQ6ICLml6DlhoXlrrkiLAogICAgICAgIHR5cGU6ICIxIiwKICAgICAgICBtYWlucGljOiAiIgogICAgICB9LAogICAgICBwdWJsaXNoaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7fSwKICB3YXRjaDoge30sCiAgbWV0aG9kczogewogICAgY2F0Y2hEYXRhOiBmdW5jdGlvbiBjYXRjaERhdGEobmV3c0NvbnRlbnQpIHsKICAgICAgdGhpcy5uZXdzLmNvbnRlbnQgPSBuZXdzQ29udGVudDsKICAgIH0sCiAgICBwdWJsaXNoOiBmdW5jdGlvbiBwdWJsaXNoKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubmV3cy50aXRsZSA9PSAiIiB8fCB0aGlzLm5ld3MubWlhbnBpYyA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIG1lc3NhZ2U6ICLor7floavlhpnmoIfpopjlkozkuLvlm77pk77mjqUhIgogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIG9iaiA9IHsKICAgICAgICB1bmFtZTogZ2xvYmFsLnVzZXIudW5hbWUsCiAgICAgICAgdXBhc3M6IGdsb2JhbC51c2VyLnVwYXNzLAogICAgICAgIHRpdGxlOiB0aGlzLm5ld3MudGl0bGUsCiAgICAgICAgY29udGVudDogdGhpcy5uZXdzLmNvbnRlbnQsCiAgICAgICAgdHlwZTogdGhpcy5uZXdzLnR5cGUsCiAgICAgICAgYXV0aGVyOiBnbG9iYWwudXNlci5uYW1lLAogICAgICAgIG1haW5waWM6IHRoaXMubmV3cy5tYWlucGljCiAgICAgIH07IC8vY29uc29sZS5sb2cob2JqKTsKCiAgICAgIHRoaXMucHVibGlzaGluZyA9IHRydWU7CiAgICAgIHRoaXMuYXhpb3MucG9zdCgiYXBpL25ld3NhZGQiLCBvYmopLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YSA+IDApIHsKICAgICAgICAgIF90aGlzLnB1Ymxpc2hpbmcgPSBmYWxzZTsKCiAgICAgICAgICBfdGhpcy4kY29uZmlybSgi5Y+R5biD5oiQ5Yqf77yM56uL5Yi75Y6755yL6L+Z5p2h5paw6Ze7IiwgIuaPkOekuiIsIHsKICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICAgICAgdHlwZTogIndhcm5pbmciCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXMuZGF0YSk7CiAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogJy9yZWFkTmV3cy8nICsgcmVzLmRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogJy9hZG1pbi9tYW5hZ2UnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgX3RoaXMucHVibGlzaGluZyA9IGZhbHNlOwogICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0KICB9LAogIC8vIOeUn+WRveWRqOacnyAtIOWIm+W7uuWujOaIkO+8iOWPr+S7peiuv+mXruW9k+WJjXRoaXPlrp7kvovvvIkKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgLy8g55Sf5ZG95ZGo5pyfIC0g5oyC6L295a6M5oiQ77yI5Y+v5Lul6K6/6ZeuRE9N5YWD57Sg77yJCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIC8vIOeUn+WRveWRqOacnyAtIOWIm+W7uuS5i+WJjQogIGJlZm9yZUNyZWF0ZTogZnVuY3Rpb24gYmVmb3JlQ3JlYXRlKCkge30sCiAgLy8g55Sf5ZG95ZGo5pyfIC0g5oyC6L295LmL5YmNCiAgYmVmb3JlTW91bnQ6IGZ1bmN0aW9uIGJlZm9yZU1vdW50KCkge30sCiAgLy8g55Sf5ZG95ZGo5pyfIC0g5pu05paw5LmL5YmNCiAgYmVmb3JlVXBkYXRlOiBmdW5jdGlvbiBiZWZvcmVVcGRhdGUoKSB7fSwKICAvLyDnlJ/lkb3lkajmnJ8gLSDmm7TmlrDkuYvlkI4KICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkKCkge30sCiAgLy8g55Sf5ZG95ZGo5pyfIC0g6ZSA5q+B5LmL5YmNCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHt9LAogIC8vIOeUn+WRveWRqOacnyAtIOmUgOavgeWujOaIkAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkge30KfTs="},{"version":3,"sources":["publish.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item :to=\"{ path: '/admin/publish' }\">发布</el-breadcrumb-item>\n      <el-button size=\"mini\" type=\"success\" class=\"right\" icon=\"el-icon-check\" :disabled=\"publishing\" @click=\"publish\">立即发布</el-button>\n    </el-breadcrumb>\n    <div style=\"margin:10px\"></div>\n    <el-row>\n      <el-col :span=\"20\">\n        <el-input v-model=\"news.title\" placeholder=\"新闻标题\"></el-input>\n      </el-col>\n      <el-col :span=\"4\">\n        <el-select v-model=\"news.type\" popper-class=\"selector\">\n          <el-option value=\"1\" label=\"教学教务\">教学教务</el-option>\n          <el-option value=\"2\" label=\"通知公告\">通知公告</el-option>\n          <el-option value=\"3\" label=\"战果捷报\">战果捷报</el-option>\n        </el-select>\n      </el-col>\n      <el-col>\n        <el-input v-model=\"news.mainpic\" placeholder=\"主图外链地址\"></el-input>\n      </el-col>\n    </el-row>\n\n    <wangeditor :catchData=\"catchData\" />\n  </div>\n</template>\n\n<script>\nimport newsTypeAdapter from \"../../tool/newsTypeAdapterToEng.js\";\nimport global from \"../../global.js\"\nimport wangeditor from \"../tool/wangeditor\";\nexport default {\n  components: {\n    wangeditor\n  },\n  data() {\n    return {\n      //newsContent:\"\",\n      news: {\n        title: \"\",\n        content: \"无内容\",\n        type: \"1\",\n        mainpic:\"\"\n      },\n      publishing:false\n    };\n  },\n\n  computed: {},\n  watch: {},\n  methods: {\n    catchData(newsContent) {\n      this.news.content = newsContent;\n    },\n    publish() {\n      if (this.news.title==\"\"||this.news.mianpic==\"\"){\n        this.$message({\n              type: \"error\",\n              message: \"请填写标题和主图链接!\"\n            });\n        return;\n      }\n      let obj = {\n        uname:global.user.uname,\n        upass:global.user.upass,\n        title: this.news.title,\n        content: this.news.content,\n        type:this.news.type,\n        auther: global.user.name,\n        mainpic:this.news.mainpic\n      }\n      //console.log(obj);\n      this.publishing = true;\n      this.axios\n        .post(\"api/newsadd\", obj)\n        .then(res => {\n          if (res.data>0) {\n            this.publishing=false;\n            this.$confirm(\"发布成功，立刻去看这条新闻\", \"提示\", {\n              confirmButtonText: \"确定\",\n              cancelButtonText: \"取消\",\n              type: \"warning\"\n            })\n              .then(() => {\n                //console.log(res.data);\n\n                  this.$router.push({\n                  path:'/readNews/'+res.data,\n                })\n              })\n              .catch(() => {\n                  this.$router.push({\n                  path:'/admin/manage',\n                })\n              });\n          }\n        })\n        .catch(err => {\n          this.publishing=false;\n          window.console.log(err);\n        });\n    }\n  },\n  // 生命周期 - 创建完成（可以访问当前this实例）\n  created() {},\n  // 生命周期 - 挂载完成（可以访问DOM元素）\n  mounted() {\n    \n  },\n  // 生命周期 - 创建之前\n  beforeCreate() {},\n  // 生命周期 - 挂载之前\n  beforeMount() {},\n  // 生命周期 - 更新之前\n  beforeUpdate() {},\n  // 生命周期 - 更新之后\n  updated() {},\n  // 生命周期 - 销毁之前\n  beforeDestroy() {},\n  // 生命周期 - 销毁完成\n  destroyed() {}\n};\n</script>\n<style scoped>\n.right {\n  float: right;\n  padding: 10px;\n  margin-right: 10px;\n}\n</style>\n"],"sourceRoot":"src/components/admin"}]}