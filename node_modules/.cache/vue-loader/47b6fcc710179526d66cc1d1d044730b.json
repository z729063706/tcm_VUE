{"remainingRequest":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoyunhao/Code/html/tcm_VUE/src/components/admin/mainpic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/src/components/admin/mainpic.vue","mtime":1658995651025},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/cache-loader/dist/cjs.js","mtime":1658995717985},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/babel-loader/lib/index.js","mtime":1658995718218},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/cache-loader/dist/cjs.js","mtime":1658995717985},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/index.js","mtime":1658995718269}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBnbG9iYWwgZnJvbSAiLi4vLi4vZ2xvYmFsLmpzIgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czoge30sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1zZzogIkhlbGxvIOeuoeeQhuWRmOeuoeeQhiIsCiAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBwaWN1cmw6IiIsCiAgICAgIHBpY2NvbnRlbnQ6IiIsCiAgICAgIHJvbGU6ICJuZXdzYWRtaW4iLAogICAgICBkaWFsb2FkQWRkVmlldzogZmFsc2UsCiAgICAgIHBpY0xpc3Q6e30KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHt9LAogIHdhdGNoOiB7fSwKICBtZXRob2RzOiB7CiAgICBWYWlsZCh2KXsKICAgICAgaWYgKHYgPT0gdHJ1ZSl7CiAgICAgICAgcmV0dXJuICfnpoHnlKgnOwogICAgICB9CiAgICAgIGVsc2V7CiAgICAgICAgcmV0dXJuICflkK/nlKgnOwogICAgICB9CiAgICB9LAogICAgaXNWYWlsZCh7cm93LCByb3dJbmRleH0pewogICAgICAvL2NvbnNvbGUubG9nKHJvdyxyb3dJbmRleCk7CiAgICAgIGlmIChyb3cudmFpbGQgPT09IGZhbHNlKSB7CiAgICAgICAgICByZXR1cm4gJ2luVmFpbGRSb3cnOwogICAgICAgIH0KICAgIH0sCiAgICBwaWNBZGQoKSB7CiAgICAgIGxldCBvYmogPSB7CiAgICAgICAgdW5hbWU6IGdsb2JhbC51c2VyLnVuYW1lLAogICAgICAgIHVwYXNzOiBnbG9iYWwudXNlci51cGFzcywKICAgICAgICBwaWN1cmw6IHRoaXMucGljdXJsLAogICAgICAgIHBpY2NvbnRlbnQ6IHRoaXMucGljY29udGVudAogICAgICB9OwogICAgICAvL2NvbnNvbGUubG9nKG9iaik7CiAgICAgIHRoaXMuYXhpb3MKICAgICAgICAucG9zdCgiL2FwaS9hZGRwaWMiLCBvYmopCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLmt7vliqDmiJDlip8iCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmRpYWxvYWRBZGRWaWV3ID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCJhcGkvbWFpbnBpYyIpCiAgICAgICAgICAgIC50aGVuKHJlcz0+ewogICAgICAgICAgICAgIHRoaXMucGljTGlzdCA9IHJlcy5kYXRhOwogICAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpcy5waWNMaXN0KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMucGljTGlzdC5zcGxpY2UoMCwgMSk7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICBtZXNzYWdlOiAi57O757uf6ZSZ6K+vIgogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICBwaWNEZWxldGUoaWQpIHsKICAgICAgLy9jb25zb2xlLmxvZyhpZCk7CiAgICAgIHRoaXMuJGNvbmZpcm0oIuatpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeWbvueJhywg5piv5ZCm57un57utPyIsICLmj5DnpLoiLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLAogICAgICAgIHR5cGU6ICJ3YXJuaW5nIgogICAgICB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgIHVuYW1lOiBnbG9iYWwudXNlci51bmFtZSwKICAgICAgICAgICAgdXBhc3M6IGdsb2JhbC51c2VyLnVwYXNzLAogICAgICAgICAgICBkZWxpZDogaWQKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoImFwaS9kZWxwaWMiLG9iaikKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoImFwaS9tYWlucGljIikKICAgICAgICAgICAgLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgdGhpcy5waWNMaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnBpY0xpc3QpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5waWNMaXN0LnNwbGljZSgwLCAxKTsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICLliKDpmaTmiJDlip8iCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoKSA9PnsKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmnI3liqHlvILluLghIgogICAgICAgICAgfSk7CiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmk43kvZzlj5bmtogiCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgcGljU3dpdGNoKGlkKXsKICAgIGxldCBvYmogPSB7CiAgICAgICAgICAgIHVuYW1lOiBnbG9iYWwudXNlci51bmFtZSwKICAgICAgICAgICAgdXBhc3M6IGdsb2JhbC51c2VyLnVwYXNzLAogICAgICAgICAgICBzd2l0Y2hpZDogaWQKICAgICAgICAgIH07CiAgICB0aGlzLmF4aW9zLnBvc3QoImFwaS9zd2l0Y2hwaWMiLG9iaikKICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoImFwaS9tYWlucGljIikKICAgICAgICAgICAgLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgdGhpcy5waWNMaXN0ID0gcmVzLmRhdGE7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLnBpY0xpc3Quc3BsaWNlKDAsIDEpOwogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuaTjeS9nOaIkOWKnyIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KQogICAgICAgICAgLmNhdGNoKCgpPT57CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuacjeWKoeW8guW4uCIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgfSwKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5heGlvcy5nZXQoImFwaS9tYWlucGljIikKICAgIC50aGVuKHJlcz0+ewogICAgICB0aGlzLnBpY0xpc3QgPSByZXMuZGF0YTsKICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLnBpY0xpc3QpOwogICAgfSk7CiAgfQp9Owo="},{"version":3,"sources":["mainpic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mainpic.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item :to=\"{ path: '/admin/mainpic' }\">轮播图管理</el-breadcrumb-item>\n    </el-breadcrumb>\n    <div class=\"content\">\n      <el-button size=\"mini\" type=\"default\" @click=\"dialoadAddView= true\">添加新图片</el-button>\n      <el-dialog class=\"dialog-addUser\" title=\"添加新图片\" :visible.sync=\"dialoadAddView\">\n        <div class=\"layout-row\">\n          <h3>图片地址</h3>\n          <el-input v-model=\"picurl\" placeholder=\"请输入图片地址\"></el-input>\n        </div>\n        <div class=\"layout-row\">\n          <h3>详细描述</h3>\n          <el-input v-model=\"piccontent\" placeholder=\"请输入图片描述\"></el-input>\n        </div>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialoadAddView = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"picAdd\">确 定</el-button>\n        </div>\n      </el-dialog>\n      <el-table\n        :data=\"picList\"\n        :row-class-name=\"isVaild\"\n        style=\"width: 100%\"\n      >\n        <el-table-column prop=\"id\" label=\"轮播图id\"></el-table-column>\n        <el-table-column prop=\"url\" label=\"图片地址\"></el-table-column>\n        <el-table-column prop=\"content\" label=\"图片描述\"></el-table-column>\n        <el-table-column prop=\"inserttime\" label=\"日期\" width=\"180\"></el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"danger\" @click=\"picDelete(scope.row.id)\">删除</el-button>\n            <el-button size=\"mini\" type=\"danger\" @click=\"picSwitch(scope.row.id)\">{{Vaild(scope.row.vaild)}}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport global from \"../../global.js\"\nexport default {\n  components: {},\n  data() {\n    return {\n      msg: \"Hello 管理员管理\",\n      username: \"\",\n      password: \"\",\n      picurl:\"\",\n      piccontent:\"\",\n      role: \"newsadmin\",\n      dialoadAddView: false,\n      picList:{}\n    };\n  },\n\n  computed: {},\n  watch: {},\n  methods: {\n    Vaild(v){\n      if (v == true){\n        return '禁用';\n      }\n      else{\n        return '启用';\n      }\n    },\n    isVaild({row, rowIndex}){\n      //console.log(row,rowIndex);\n      if (row.vaild === false) {\n          return 'inVaildRow';\n        }\n    },\n    picAdd() {\n      let obj = {\n        uname: global.user.uname,\n        upass: global.user.upass,\n        picurl: this.picurl,\n        piccontent: this.piccontent\n      };\n      //console.log(obj);\n      this.axios\n        .post(\"/api/addpic\", obj)\n        .then(res => {\n            this.$message({\n              type: \"success\",\n              message: \"添加成功\"\n            });\n            this.dialoadAddView = false;\n            this.axios.get(\"api/mainpic\")\n            .then(res=>{\n              this.picList = res.data;\n              //console.log(this.picList);\n            });\n            this.picList.splice(0, 1);\n        })\n        .catch(() => {\n          this.$message({\n              type: \"error\",\n              message: \"系统错误\"\n            });\n        });\n    },\n    picDelete(id) {\n      //console.log(id);\n      this.$confirm(\"此操作将永久删除该图片, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          let obj = {\n            uname: global.user.uname,\n            upass: global.user.upass,\n            delid: id\n          };\n          this.axios.post(\"api/delpic\",obj)\n          .then(() => {\n            this.axios.get(\"api/mainpic\")\n            .then(res=>{\n              this.picList = res.data;\n              //console.log(this.picList);\n            });\n            this.picList.splice(0, 1);\n            this.$message({\n              type: \"success\",\n              message: \"删除成功\"\n            });\n          })\n          .catch(() =>{\n            this.$message({\n            type: \"error\",\n            message: \"服务异常!\"\n          });\n          })\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"操作取消\"\n          });\n        });\n    },\n  picSwitch(id){\n    let obj = {\n            uname: global.user.uname,\n            upass: global.user.upass,\n            switchid: id\n          };\n    this.axios.post(\"api/switchpic\",obj)\n          .then(() => {\n            this.axios.get(\"api/mainpic\")\n            .then(res=>{\n              this.picList = res.data;\n            });\n            this.picList.splice(0, 1);\n            this.$message({\n              type: \"success\",\n              message: \"操作成功\"\n            });\n          })\n          .catch(()=>{\n            this.$message({\n              type: \"error\",\n              message: \"服务异常\"\n            });\n          });\n\n  },\n  },\n\n  mounted() {\n    this.axios.get(\"api/mainpic\")\n    .then(res=>{\n      this.picList = res.data;\n      //console.log(this.picList);\n    });\n  }\n};\n</script>\n<style>\n.dialog-addUser h3 {\n  width: 100px;\n  margin-bottom: 20px;\n}\n.el-select {\n  width: 100%;\n}\n.el-table .inVaildRow {\n    background: #f0b9b7 !important ;\n  }\n</style>\n"]}]}