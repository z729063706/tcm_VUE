{"remainingRequest":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoyunhao/Code/html/tcm_VUE/src/components/admin/manage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/src/components/admin/manage.vue","mtime":1658995651025},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/cache-loader/dist/cjs.js","mtime":1658995717985},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/babel-loader/lib/index.js","mtime":1658995718218},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/cache-loader/dist/cjs.js","mtime":1658995717985},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/index.js","mtime":1658995718269}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBnbG9iYWwgZnJvbSAnLi4vLi4vZ2xvYmFsLmpzJzsKLy8gVnVlLnByb3RvdHlwZS4kZ2xvYmFsVXNlciA9IGdsb2JhbDsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHt9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0eXBlOiAiMSIsCiAgICAgIHRhYmxlRGF0YTogewogICAgICAgIGN1cnJlbnROdW06MCwKICAgICAgICBudW06MTAsCiAgICAgICAgcGFnZToxCiAgICAgIH0sCiAgICAgIG5ld3M6e30sCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7fSwKICB3YXRjaDoge30sCiAgbWV0aG9kczogewogICAgCiAgICBuZXdzVHlwZSh0eXBlKXsKICAgICAgaWYgKHR5cGUgPT0gJzEnKXsKICAgICAgICByZXR1cm4gIuaVmeWtpuaVmeWKoSI7CiAgICAgIH1lbHNlIGlmKHR5cGUgPT0gJzInKXsKICAgICAgICByZXR1cm4gIumAmuefpeWFrOWRiiIKICAgICAgfWVsc2UgaWYodHlwZSA9PSAnMycpewogICAgICAgIHJldHVybiAi5oiY5p6c5o235oqlIgogICAgICB9ZWxzZXsKICAgICAgICByZXR1cm4gIkJVRyEhISEiCiAgICAgIH0KICAgIH0sCgoKICAgIGNoYW5nZVBhZ2UocGFnZSkgewogICAgICB0aGlzLnRhYmxlRGF0YS5jdXJyZW50TnVtID0gMTAqKHBhZ2UtMSkKICAgIH0sCiAgICBjaGFuZ2VOZXdUeXBlKCkgewogICAgICB0aGlzLmF4aW9zLmdldCgiYXBpL25ld3M/dHlwZT0iK3RoaXMudHlwZSkudGhlbihyZXM9PnsKICAgICAgdGhpcy5uZXdzID0gcmVzLmRhdGE7CiAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVWaWV3KGlkKSB7CiAgICAgIC8vY29uc29sZS5sb2coaWQpCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL3JlYWROZXdzLyIraWQsCiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZURlbGV0ZShpZCkgewogICAgICB0aGlzLiRjb25maXJtKCLmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XmlrDpl7ssIOaYr+WQpue7p+e7rT8iLCAi5o+Q56S6IiwgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raIIiwKICAgICAgICB0eXBlOiAid2FybmluZyIKICAgICAgfSkKICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAvL2NvbnNvbGUubG9nKGdsb2JhbC51c2VyKTsKICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCJhcGkvZGVsbmV3cz9pZD0iK2lkKyImdW5hbWU9IitnbG9iYWwudXNlci51bmFtZSsiJnVwYXNzPSIrZ2xvYmFsLnVzZXIudXBhc3MpCiAgICAgICAgICAudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuY2hhbmdlTmV3VHlwZSgpCiAgICAgICAgICAgIC8vdGhpcy50YWJsZURhdGEubGlzdC5zcGxpY2UoMCwgMSk7CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgICBtZXNzYWdlOiAi5Yig6Zmk5oiQ5YqfIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGUpPT57CiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiAi55So5oi35p2D6ZmQ5LiN6LazISIrZQogICAgICAgICAgfSk7CiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiaW5mbyIsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmk43kvZzlj5bmtogiCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0sCiAgICB0eXBlSWRUb1RleHQodHlwZSkgewogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICByZXR1cm4gIueDreeCueaWsOmXuyI7CiAgICAgICAgY2FzZSAxOgogICAgICAgICAgcmV0dXJuICLmoKHlm63lv6vorq8iOwogICAgICAgIGNhc2UgMjoKICAgICAgICAgIHJldHVybiAi5aqS5L2T55m95LqRIjsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICByZXR1cm4gIuWqkuS9k+eZveS6kSI7CiAgICAgIH0KICAgIH0KICB9LAogIC8vIOeUn+WRveWRqOacnyAtIOWIm+W7uuWujOaIkO+8iOWPr+S7peiuv+mXruW9k+WJjXRoaXPlrp7kvovvvIkKICBjcmVhdGVkKCkgewogICAgdGhpcy5jaGFuZ2VOZXdUeXBlKCk7CiAgfSwKICAvLyDnlJ/lkb3lkajmnJ8gLSDmjILovb3lrozmiJDvvIjlj6/ku6Xorr/pl65ET03lhYPntKDvvIkKICBtb3VudGVkKCkgewogICAgLy93aW5kb3cuY29uc29sZS5sb2codGhpcy50YWJsZURhdGEpCiAgICAvLyB0aGlzLnRhYmxlRGF0YSA9IHRoaXMubmV3cy5ob3Q7CiAgfSwKICAvLyDnlJ/lkb3lkajmnJ8gLSDliJvlu7rkuYvliY0KICBiZWZvcmVDcmVhdGUoKSB7fSwKICAvLyDnlJ/lkb3lkajmnJ8gLSDmjILovb3kuYvliY0KICBiZWZvcmVNb3VudCgpIHt9LAogIC8vIOeUn+WRveWRqOacnyAtIOabtOaWsOS5i+WJjQogIGJlZm9yZVVwZGF0ZSgpIHt9LAogIC8vIOeUn+WRveWRqOacnyAtIOabtOaWsOS5i+WQjgogIHVwZGF0ZWQoKSB7fSwKICAvLyDnlJ/lkb3lkajmnJ8gLSDplIDmr4HkuYvliY0KICBiZWZvcmVEZXN0cm95KCkge30sCiAgLy8g55Sf5ZG95ZGo5pyfIC0g6ZSA5q+B5a6M5oiQCiAgZGVzdHJveWVkKCkge30KfTsK"},{"version":3,"sources":["manage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"manage.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item :to=\"{ path: '/admin/manage' }\">新闻管理</el-breadcrumb-item>\n      <el-select v-model=\"type\" @change=\"changeNewType\" class=\"typeSelecter\">\n        <el-option value=\"1\" label=\"教学教务\">教学教务</el-option>\n        <el-option value=\"2\" label=\"通知公告\">通知公告</el-option>\n        <el-option value=\"3\" label=\"战果捷报\">战果捷报</el-option>\n      </el-select>\n    </el-breadcrumb>\n    <div style=\"margin:10px\"></div>\n\n    <el-table :data=\"news.slice(tableData.currentNum,tableData.currentNum+tableData.num)\" border style=\"width: 100%\">\n      <el-table-column prop=\"creatTime\" label=\"日期\" width=\"180\"></el-table-column>\n      <el-table-column prop=\"title\" label=\"标题\"></el-table-column>\n      <el-table-column prop=\"auther\" width=\"60\" label=\"作者\"></el-table-column>\n      <el-table-column prop=\"type\" width=\"120\" label=\"类型\">{{newsType(type)}}</el-table-column>\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"success\" @click=\"handleView(scope.row.id)\">查看</el-button>\n          <el-button size=\"mini\" type=\"danger\" @click=\"handleDelete(scope.row.id)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div class=\"pagination\">\n      <el-pagination\n        layout=\"prev, pager, next\"\n        :page-size=\"1\"\n        :current-page=\"tableData.Page\"\n        :total=\"news.length/tableData.num\"\n        @current-change=\"changePage\"\n      ></el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport global from '../../global.js';\n// Vue.prototype.$globalUser = global;\nexport default {\n  components: {},\n  data() {\n    return {\n      type: \"1\",\n      tableData: {\n        currentNum:0,\n        num:10,\n        page:1\n      },\n      news:{},\n    };\n  },\n\n  computed: {},\n  watch: {},\n  methods: {\n    \n    newsType(type){\n      if (type == '1'){\n        return \"教学教务\";\n      }else if(type == '2'){\n        return \"通知公告\"\n      }else if(type == '3'){\n        return \"战果捷报\"\n      }else{\n        return \"BUG!!!!\"\n      }\n    },\n\n\n    changePage(page) {\n      this.tableData.currentNum = 10*(page-1)\n    },\n    changeNewType() {\n      this.axios.get(\"api/news?type=\"+this.type).then(res=>{\n      this.news = res.data;\n    });\n    },\n    handleView(id) {\n      //console.log(id)\n      this.$router.push({\n        path: \"/readNews/\"+id,\n      });\n    },\n    handleDelete(id) {\n      this.$confirm(\"此操作将永久删除该新闻, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          //console.log(global.user);\n          this.axios.get(\"api/delnews?id=\"+id+\"&uname=\"+global.user.uname+\"&upass=\"+global.user.upass)\n          .then(() => {\n            this.changeNewType()\n            //this.tableData.list.splice(0, 1);\n            this.$message({\n              type: \"success\",\n              message: \"删除成功\"\n            });\n          })\n          .catch((e)=>{\n            this.$message({\n            type: \"error\",\n            message: \"用户权限不足!\"+e\n          });\n          })\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"操作取消\"\n          });\n        });\n    },\n    typeIdToText(type) {\n      switch (type) {\n        case 0:\n          return \"热点新闻\";\n        case 1:\n          return \"校园快讯\";\n        case 2:\n          return \"媒体白云\";\n        case 3:\n          return \"媒体白云\";\n      }\n    }\n  },\n  // 生命周期 - 创建完成（可以访问当前this实例）\n  created() {\n    this.changeNewType();\n  },\n  // 生命周期 - 挂载完成（可以访问DOM元素）\n  mounted() {\n    //window.console.log(this.tableData)\n    // this.tableData = this.news.hot;\n  },\n  // 生命周期 - 创建之前\n  beforeCreate() {},\n  // 生命周期 - 挂载之前\n  beforeMount() {},\n  // 生命周期 - 更新之前\n  beforeUpdate() {},\n  // 生命周期 - 更新之后\n  updated() {},\n  // 生命周期 - 销毁之前\n  beforeDestroy() {},\n  // 生命周期 - 销毁完成\n  destroyed() {}\n};\n</script>\n<style scoped>\n.pagination {\n  float: right;\n}\n.el-select{\n  width: auto;\n}\n.typeSelecter {\n  float: right;\n}\n</style>\n"]}]}