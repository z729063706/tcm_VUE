{"remainingRequest":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoyunhao/Code/html/tcm_VUE/src/components/admin/mainpic.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/src/components/admin/mainpic.vue","mtime":1658995651025},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/css-loader/dist/cjs.js","mtime":1658995718131},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1658995718357},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/postcss-loader/src/index.js","mtime":1658995718197},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/cache-loader/dist/cjs.js","mtime":1658995717985},{"path":"/Users/zhaoyunhao/Code/html/tcm_VUE/node_modules/vue-loader/lib/index.js","mtime":1658995718269}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5kaWFsb2ctYWRkVXNlciBoMyB7CiAgd2lkdGg6IDEwMHB4OwogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KLmVsLXNlbGVjdCB7CiAgd2lkdGg6IDEwMCU7Cn0KLmVsLXRhYmxlIC5pblZhaWxkUm93IHsKICAgIGJhY2tncm91bmQ6ICNmMGI5YjcgIWltcG9ydGFudCA7CiAgfQo="},{"version":3,"sources":["mainpic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"mainpic.vue","sourceRoot":"src/components/admin","sourcesContent":["<template>\n  <div class>\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item :to=\"{ path: '/admin/mainpic' }\">轮播图管理</el-breadcrumb-item>\n    </el-breadcrumb>\n    <div class=\"content\">\n      <el-button size=\"mini\" type=\"default\" @click=\"dialoadAddView= true\">添加新图片</el-button>\n      <el-dialog class=\"dialog-addUser\" title=\"添加新图片\" :visible.sync=\"dialoadAddView\">\n        <div class=\"layout-row\">\n          <h3>图片地址</h3>\n          <el-input v-model=\"picurl\" placeholder=\"请输入图片地址\"></el-input>\n        </div>\n        <div class=\"layout-row\">\n          <h3>详细描述</h3>\n          <el-input v-model=\"piccontent\" placeholder=\"请输入图片描述\"></el-input>\n        </div>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"dialoadAddView = false\">取 消</el-button>\n          <el-button type=\"primary\" @click=\"picAdd\">确 定</el-button>\n        </div>\n      </el-dialog>\n      <el-table\n        :data=\"picList\"\n        :row-class-name=\"isVaild\"\n        style=\"width: 100%\"\n      >\n        <el-table-column prop=\"id\" label=\"轮播图id\"></el-table-column>\n        <el-table-column prop=\"url\" label=\"图片地址\"></el-table-column>\n        <el-table-column prop=\"content\" label=\"图片描述\"></el-table-column>\n        <el-table-column prop=\"inserttime\" label=\"日期\" width=\"180\"></el-table-column>\n        <el-table-column label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button size=\"mini\" type=\"danger\" @click=\"picDelete(scope.row.id)\">删除</el-button>\n            <el-button size=\"mini\" type=\"danger\" @click=\"picSwitch(scope.row.id)\">{{Vaild(scope.row.vaild)}}</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport global from \"../../global.js\"\nexport default {\n  components: {},\n  data() {\n    return {\n      msg: \"Hello 管理员管理\",\n      username: \"\",\n      password: \"\",\n      picurl:\"\",\n      piccontent:\"\",\n      role: \"newsadmin\",\n      dialoadAddView: false,\n      picList:{}\n    };\n  },\n\n  computed: {},\n  watch: {},\n  methods: {\n    Vaild(v){\n      if (v == true){\n        return '禁用';\n      }\n      else{\n        return '启用';\n      }\n    },\n    isVaild({row, rowIndex}){\n      //console.log(row,rowIndex);\n      if (row.vaild === false) {\n          return 'inVaildRow';\n        }\n    },\n    picAdd() {\n      let obj = {\n        uname: global.user.uname,\n        upass: global.user.upass,\n        picurl: this.picurl,\n        piccontent: this.piccontent\n      };\n      //console.log(obj);\n      this.axios\n        .post(\"/api/addpic\", obj)\n        .then(res => {\n            this.$message({\n              type: \"success\",\n              message: \"添加成功\"\n            });\n            this.dialoadAddView = false;\n            this.axios.get(\"api/mainpic\")\n            .then(res=>{\n              this.picList = res.data;\n              //console.log(this.picList);\n            });\n            this.picList.splice(0, 1);\n        })\n        .catch(() => {\n          this.$message({\n              type: \"error\",\n              message: \"系统错误\"\n            });\n        });\n    },\n    picDelete(id) {\n      //console.log(id);\n      this.$confirm(\"此操作将永久删除该图片, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          let obj = {\n            uname: global.user.uname,\n            upass: global.user.upass,\n            delid: id\n          };\n          this.axios.post(\"api/delpic\",obj)\n          .then(() => {\n            this.axios.get(\"api/mainpic\")\n            .then(res=>{\n              this.picList = res.data;\n              //console.log(this.picList);\n            });\n            this.picList.splice(0, 1);\n            this.$message({\n              type: \"success\",\n              message: \"删除成功\"\n            });\n          })\n          .catch(() =>{\n            this.$message({\n            type: \"error\",\n            message: \"服务异常!\"\n          });\n          })\n        })\n        .catch(() => {\n          this.$message({\n            type: \"info\",\n            message: \"操作取消\"\n          });\n        });\n    },\n  picSwitch(id){\n    let obj = {\n            uname: global.user.uname,\n            upass: global.user.upass,\n            switchid: id\n          };\n    this.axios.post(\"api/switchpic\",obj)\n          .then(() => {\n            this.axios.get(\"api/mainpic\")\n            .then(res=>{\n              this.picList = res.data;\n            });\n            this.picList.splice(0, 1);\n            this.$message({\n              type: \"success\",\n              message: \"操作成功\"\n            });\n          })\n          .catch(()=>{\n            this.$message({\n              type: \"error\",\n              message: \"服务异常\"\n            });\n          });\n\n  },\n  },\n\n  mounted() {\n    this.axios.get(\"api/mainpic\")\n    .then(res=>{\n      this.picList = res.data;\n      //console.log(this.picList);\n    });\n  }\n};\n</script>\n<style>\n.dialog-addUser h3 {\n  width: 100px;\n  margin-bottom: 20px;\n}\n.el-select {\n  width: 100%;\n}\n.el-table .inVaildRow {\n    background: #f0b9b7 !important ;\n  }\n</style>\n"]}]}